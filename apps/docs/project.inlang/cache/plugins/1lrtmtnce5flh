var Yn=Object.create;var En=Object.defineProperty;var Xn=Object.getOwnPropertyDescriptor;var hn=Object.getOwnPropertyNames;var Gn=Object.getPrototypeOf,et=Object.prototype.hasOwnProperty;var In=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports);var nt=(s,e,o,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of hn(e))!et.call(s,a)&&a!==o&&En(s,a,{get:()=>e[a],enumerable:!(r=Xn(e,a))||r.enumerable});return s};var On=(s,e,o)=>(o=s!=null?Yn(Gn(s)):{},nt(e||!s||!s.__esModule?En(o,"default",{value:s,enumerable:!0}):o,s));var An=In(c=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});c.Type=c.JsonType=c.JavaScriptTypeBuilder=c.JsonTypeBuilder=c.TypeBuilder=c.TypeBuilderError=c.TransformEncodeBuilder=c.TransformDecodeBuilder=c.TemplateLiteralDslParser=c.TemplateLiteralGenerator=c.TemplateLiteralGeneratorError=c.TemplateLiteralFinite=c.TemplateLiteralFiniteError=c.TemplateLiteralParser=c.TemplateLiteralParserError=c.TemplateLiteralResolver=c.TemplateLiteralPattern=c.TemplateLiteralPatternError=c.UnionResolver=c.KeyArrayResolver=c.KeyArrayResolverError=c.KeyResolver=c.ObjectMap=c.Intrinsic=c.IndexedAccessor=c.TypeClone=c.TypeExtends=c.TypeExtendsResult=c.TypeExtendsError=c.ExtendsUndefined=c.TypeGuard=c.TypeGuardUnknownTypeError=c.ValueGuard=c.FormatRegistry=c.TypeBoxError=c.TypeRegistry=c.PatternStringExact=c.PatternNumberExact=c.PatternBooleanExact=c.PatternString=c.PatternNumber=c.PatternBoolean=c.Kind=c.Hint=c.Optional=c.Readonly=c.Transform=void 0;c.Transform=Symbol.for("TypeBox.Transform");c.Readonly=Symbol.for("TypeBox.Readonly");c.Optional=Symbol.for("TypeBox.Optional");c.Hint=Symbol.for("TypeBox.Hint");c.Kind=Symbol.for("TypeBox.Kind");c.PatternBoolean="(true|false)";c.PatternNumber="(0|[1-9][0-9]*)";c.PatternString="(.*)";c.PatternBooleanExact=`^${c.PatternBoolean}$`;c.PatternNumberExact=`^${c.PatternNumber}$`;c.PatternStringExact=`^${c.PatternString}$`;var vn;(function(s){let e=new Map;function o(){return new Map(e)}s.Entries=o;function r(){return e.clear()}s.Clear=r;function a(O){return e.delete(O)}s.Delete=a;function f(O){return e.has(O)}s.Has=f;function p(O,j){e.set(O,j)}s.Set=p;function g(O){return e.get(O)}s.Get=g})(vn||(c.TypeRegistry=vn={}));var ce=class extends Error{constructor(e){super(e)}};c.TypeBoxError=ce;var Ln;(function(s){let e=new Map;function o(){return new Map(e)}s.Entries=o;function r(){return e.clear()}s.Clear=r;function a(O){return e.delete(O)}s.Delete=a;function f(O){return e.has(O)}s.Has=f;function p(O,j){e.set(O,j)}s.Set=p;function g(O){return e.get(O)}s.Get=g})(Ln||(c.FormatRegistry=Ln={}));var S;(function(s){function e(I){return Array.isArray(I)}s.IsArray=e;function o(I){return typeof I=="bigint"}s.IsBigInt=o;function r(I){return typeof I=="boolean"}s.IsBoolean=r;function a(I){return I instanceof globalThis.Date}s.IsDate=a;function f(I){return I===null}s.IsNull=f;function p(I){return typeof I=="number"}s.IsNumber=p;function g(I){return typeof I=="object"&&I!==null}s.IsObject=g;function O(I){return typeof I=="string"}s.IsString=O;function j(I){return I instanceof globalThis.Uint8Array}s.IsUint8Array=j;function x(I){return I===void 0}s.IsUndefined=x})(S||(c.ValueGuard=S={}));var xn=class extends ce{};c.TypeGuardUnknownTypeError=xn;var l;(function(s){function e(i){try{return new RegExp(i),!0}catch{return!1}}function o(i){if(!S.IsString(i))return!1;for(let _=0;_<i.length;_++){let h=i.charCodeAt(_);if(h>=7&&h<=13||h===27||h===127)return!1}return!0}function r(i){return p(i)||V(i)}function a(i){return S.IsUndefined(i)||S.IsBigInt(i)}function f(i){return S.IsUndefined(i)||S.IsNumber(i)}function p(i){return S.IsUndefined(i)||S.IsBoolean(i)}function g(i){return S.IsUndefined(i)||S.IsString(i)}function O(i){return S.IsUndefined(i)||S.IsString(i)&&o(i)&&e(i)}function j(i){return S.IsUndefined(i)||S.IsString(i)&&o(i)}function x(i){return S.IsUndefined(i)||V(i)}function I(i){return A(i,"Any")&&g(i.$id)}s.TAny=I;function E(i){return A(i,"Array")&&i.type==="array"&&g(i.$id)&&V(i.items)&&f(i.minItems)&&f(i.maxItems)&&p(i.uniqueItems)&&x(i.contains)&&f(i.minContains)&&f(i.maxContains)}s.TArray=E;function b(i){return A(i,"AsyncIterator")&&i.type==="AsyncIterator"&&g(i.$id)&&V(i.items)}s.TAsyncIterator=b;function N(i){return A(i,"BigInt")&&i.type==="bigint"&&g(i.$id)&&a(i.exclusiveMaximum)&&a(i.exclusiveMinimum)&&a(i.maximum)&&a(i.minimum)&&a(i.multipleOf)}s.TBigInt=N;function R(i){return A(i,"Boolean")&&i.type==="boolean"&&g(i.$id)}s.TBoolean=R;function C(i){return A(i,"Constructor")&&i.type==="Constructor"&&g(i.$id)&&S.IsArray(i.parameters)&&i.parameters.every(_=>V(_))&&V(i.returns)}s.TConstructor=C;function $(i){return A(i,"Date")&&i.type==="Date"&&g(i.$id)&&f(i.exclusiveMaximumTimestamp)&&f(i.exclusiveMinimumTimestamp)&&f(i.maximumTimestamp)&&f(i.minimumTimestamp)&&f(i.multipleOfTimestamp)}s.TDate=$;function B(i){return A(i,"Function")&&i.type==="Function"&&g(i.$id)&&S.IsArray(i.parameters)&&i.parameters.every(_=>V(_))&&V(i.returns)}s.TFunction=B;function M(i){return A(i,"Integer")&&i.type==="integer"&&g(i.$id)&&f(i.exclusiveMaximum)&&f(i.exclusiveMinimum)&&f(i.maximum)&&f(i.minimum)&&f(i.multipleOf)}s.TInteger=M;function W(i){return A(i,"Intersect")&&!(S.IsString(i.type)&&i.type!=="object")&&S.IsArray(i.allOf)&&i.allOf.every(_=>V(_)&&!Pe(_))&&g(i.type)&&(p(i.unevaluatedProperties)||x(i.unevaluatedProperties))&&g(i.$id)}s.TIntersect=W;function D(i){return A(i,"Iterator")&&i.type==="Iterator"&&g(i.$id)&&V(i.items)}s.TIterator=D;function A(i,_){return Q(i)&&i[c.Kind]===_}s.TKindOf=A;function Q(i){return S.IsObject(i)&&c.Kind in i&&S.IsString(i[c.Kind])}s.TKind=Q;function le(i){return te(i)&&S.IsString(i.const)}s.TLiteralString=le;function Se(i){return te(i)&&S.IsNumber(i.const)}s.TLiteralNumber=Se;function fe(i){return te(i)&&S.IsBoolean(i.const)}s.TLiteralBoolean=fe;function te(i){return A(i,"Literal")&&g(i.$id)&&(S.IsBoolean(i.const)||S.IsNumber(i.const)||S.IsString(i.const))}s.TLiteral=te;function oe(i){return A(i,"Never")&&S.IsObject(i.not)&&Object.getOwnPropertyNames(i.not).length===0}s.TNever=oe;function z(i){return A(i,"Not")&&V(i.not)}s.TNot=z;function ue(i){return A(i,"Null")&&i.type==="null"&&g(i.$id)}s.TNull=ue;function Ue(i){return A(i,"Number")&&i.type==="number"&&g(i.$id)&&f(i.exclusiveMaximum)&&f(i.exclusiveMinimum)&&f(i.maximum)&&f(i.minimum)&&f(i.multipleOf)}s.TNumber=Ue;function xe(i){return A(i,"Object")&&i.type==="object"&&g(i.$id)&&S.IsObject(i.properties)&&r(i.additionalProperties)&&f(i.minProperties)&&f(i.maxProperties)&&Object.entries(i.properties).every(([_,h])=>o(_)&&V(h))}s.TObject=xe;function ee(i){return A(i,"Promise")&&i.type==="Promise"&&g(i.$id)&&V(i.item)}s.TPromise=ee;function Re(i){return A(i,"Record")&&i.type==="object"&&g(i.$id)&&r(i.additionalProperties)&&S.IsObject(i.patternProperties)&&(_=>{let h=Object.getOwnPropertyNames(_.patternProperties);return h.length===1&&e(h[0])&&S.IsObject(_.patternProperties)&&V(_.patternProperties[h[0]])})(i)}s.TRecord=Re;function Ve(i){return S.IsObject(i)&&c.Hint in i&&i[c.Hint]==="Recursive"}s.TRecursive=Ve;function Ne(i){return A(i,"Ref")&&g(i.$id)&&S.IsString(i.$ref)}s.TRef=Ne;function ye(i){return A(i,"String")&&i.type==="string"&&g(i.$id)&&f(i.minLength)&&f(i.maxLength)&&O(i.pattern)&&j(i.format)}s.TString=ye;function ge(i){return A(i,"Symbol")&&i.type==="symbol"&&g(i.$id)}s.TSymbol=ge;function pe(i){return A(i,"TemplateLiteral")&&i.type==="string"&&S.IsString(i.pattern)&&i.pattern[0]==="^"&&i.pattern[i.pattern.length-1]==="$"}s.TTemplateLiteral=pe;function Ae(i){return A(i,"This")&&g(i.$id)&&S.IsString(i.$ref)}s.TThis=Ae;function Pe(i){return S.IsObject(i)&&c.Transform in i}s.TTransform=Pe;function J(i){return A(i,"Tuple")&&i.type==="array"&&g(i.$id)&&S.IsNumber(i.minItems)&&S.IsNumber(i.maxItems)&&i.minItems===i.maxItems&&(S.IsUndefined(i.items)&&S.IsUndefined(i.additionalItems)&&i.minItems===0||S.IsArray(i.items)&&i.items.every(_=>V(_)))}s.TTuple=J;function be(i){return A(i,"Undefined")&&i.type==="undefined"&&g(i.$id)}s.TUndefined=be;function se(i){return ie(i)&&i.anyOf.every(_=>le(_)||Se(_))}s.TUnionLiteral=se;function ie(i){return A(i,"Union")&&g(i.$id)&&S.IsObject(i)&&S.IsArray(i.anyOf)&&i.anyOf.every(_=>V(_))}s.TUnion=ie;function me(i){return A(i,"Uint8Array")&&i.type==="Uint8Array"&&g(i.$id)&&f(i.minByteLength)&&f(i.maxByteLength)}s.TUint8Array=me;function H(i){return A(i,"Unknown")&&g(i.$id)}s.TUnknown=H;function de(i){return A(i,"Unsafe")}s.TUnsafe=de;function X(i){return A(i,"Void")&&i.type==="void"&&g(i.$id)}s.TVoid=X;function ae(i){return S.IsObject(i)&&i[c.Readonly]==="Readonly"}s.TReadonly=ae;function we(i){return S.IsObject(i)&&i[c.Optional]==="Optional"}s.TOptional=we;function V(i){return S.IsObject(i)&&(I(i)||E(i)||R(i)||N(i)||b(i)||C(i)||$(i)||B(i)||M(i)||W(i)||D(i)||te(i)||oe(i)||z(i)||ue(i)||Ue(i)||xe(i)||ee(i)||Re(i)||Ne(i)||ye(i)||ge(i)||pe(i)||Ae(i)||J(i)||be(i)||ie(i)||me(i)||H(i)||de(i)||X(i)||Q(i)&&vn.Has(i[c.Kind]))}s.TSchema=V})(l||(c.TypeGuard=l={}));var Rn;(function(s){function e(o){return o[c.Kind]==="Intersect"?o.allOf.every(r=>e(r)):o[c.Kind]==="Union"?o.anyOf.some(r=>e(r)):o[c.Kind]==="Undefined"?!0:o[c.Kind]==="Not"?!e(o.not):!1}s.Check=e})(Rn||(c.ExtendsUndefined=Rn={}));var en=class extends ce{};c.TypeExtendsError=en;var y;(function(s){s[s.Union=0]="Union",s[s.True=1]="True",s[s.False=2]="False"})(y||(c.TypeExtendsResult=y={}));var Le;(function(s){function e(t){return t===y.False?t:y.True}function o(t){throw new en(t)}function r(t){return l.TNever(t)||l.TIntersect(t)||l.TUnion(t)||l.TUnknown(t)||l.TAny(t)}function a(t,n){return l.TNever(n)?A(t,n):l.TIntersect(n)?B(t,n):l.TUnion(n)?We(t,n):l.TUnknown(n)?Fe(t,n):l.TAny(n)?f(t,n):o("StructuralRight")}function f(t,n){return y.True}function p(t,n){return l.TIntersect(n)?B(t,n):l.TUnion(n)&&n.anyOf.some(K=>l.TAny(K)||l.TUnknown(K))?y.True:l.TUnion(n)?y.Union:l.TUnknown(n)||l.TAny(n)?y.True:y.Union}function g(t,n){return l.TUnknown(t)?y.False:l.TAny(t)?y.Union:l.TNever(t)?y.True:y.False}function O(t,n){return l.TObject(n)&&pe(n)?y.True:r(n)?a(t,n):l.TArray(n)?e(k(t.items,n.items)):y.False}function j(t,n){return r(n)?a(t,n):l.TAsyncIterator(n)?e(k(t.items,n.items)):y.False}function x(t,n){return r(n)?a(t,n):l.TObject(n)?J(t,n):l.TRecord(n)?H(t,n):l.TBigInt(n)?y.True:y.False}function I(t,n){return l.TLiteral(t)&&S.IsBoolean(t.const)||l.TBoolean(t)?y.True:y.False}function E(t,n){return r(n)?a(t,n):l.TObject(n)?J(t,n):l.TRecord(n)?H(t,n):l.TBoolean(n)?y.True:y.False}function b(t,n){return r(n)?a(t,n):l.TObject(n)?J(t,n):l.TConstructor(n)?t.parameters.length>n.parameters.length?y.False:t.parameters.every((K,ne)=>e(k(n.parameters[ne],K))===y.True)?e(k(t.returns,n.returns)):y.False:y.False}function N(t,n){return r(n)?a(t,n):l.TObject(n)?J(t,n):l.TRecord(n)?H(t,n):l.TDate(n)?y.True:y.False}function R(t,n){return r(n)?a(t,n):l.TObject(n)?J(t,n):l.TFunction(n)?t.parameters.length>n.parameters.length?y.False:t.parameters.every((K,ne)=>e(k(n.parameters[ne],K))===y.True)?e(k(t.returns,n.returns)):y.False:y.False}function C(t,n){return l.TLiteral(t)&&S.IsNumber(t.const)||l.TNumber(t)||l.TInteger(t)?y.True:y.False}function $(t,n){return l.TInteger(n)||l.TNumber(n)?y.True:r(n)?a(t,n):l.TObject(n)?J(t,n):l.TRecord(n)?H(t,n):y.False}function B(t,n){return n.allOf.every(K=>k(t,K)===y.True)?y.True:y.False}function M(t,n){return t.allOf.some(K=>k(K,n)===y.True)?y.True:y.False}function W(t,n){return r(n)?a(t,n):l.TIterator(n)?e(k(t.items,n.items)):y.False}function D(t,n){return l.TLiteral(n)&&n.const===t.const?y.True:r(n)?a(t,n):l.TObject(n)?J(t,n):l.TRecord(n)?H(t,n):l.TString(n)?X(t,n):l.TNumber(n)?te(t,n):l.TInteger(n)?C(t,n):l.TBoolean(n)?I(t,n):y.False}function A(t,n){return y.False}function Q(t,n){return y.True}function le(t){let[n,K]=[t,0];for(;l.TNot(n);)n=n.not,K+=1;return K%2===0?n:c.Type.Unknown()}function Se(t,n){return l.TNot(t)?k(le(t),n):l.TNot(n)?k(t,le(n)):o("Invalid fallthrough for Not")}function fe(t,n){return r(n)?a(t,n):l.TObject(n)?J(t,n):l.TRecord(n)?H(t,n):l.TNull(n)?y.True:y.False}function te(t,n){return l.TLiteralNumber(t)||l.TNumber(t)||l.TInteger(t)?y.True:y.False}function oe(t,n){return r(n)?a(t,n):l.TObject(n)?J(t,n):l.TRecord(n)?H(t,n):l.TInteger(n)||l.TNumber(n)?y.True:y.False}function z(t,n){return Object.getOwnPropertyNames(t.properties).length===n}function ue(t){return pe(t)}function Ue(t){return z(t,0)||z(t,1)&&"description"in t.properties&&l.TUnion(t.properties.description)&&t.properties.description.anyOf.length===2&&(l.TString(t.properties.description.anyOf[0])&&l.TUndefined(t.properties.description.anyOf[1])||l.TString(t.properties.description.anyOf[1])&&l.TUndefined(t.properties.description.anyOf[0]))}function xe(t){return z(t,0)}function ee(t){return z(t,0)}function Re(t){return z(t,0)}function Ve(t){return z(t,0)}function Ne(t){return pe(t)}function ye(t){let n=c.Type.Number();return z(t,0)||z(t,1)&&"length"in t.properties&&e(k(t.properties.length,n))===y.True}function ge(t){return z(t,0)}function pe(t){let n=c.Type.Number();return z(t,0)||z(t,1)&&"length"in t.properties&&e(k(t.properties.length,n))===y.True}function Ae(t){let n=c.Type.Function([c.Type.Any()],c.Type.Any());return z(t,0)||z(t,1)&&"then"in t.properties&&e(k(t.properties.then,n))===y.True}function Pe(t,n){return k(t,n)===y.False||l.TOptional(t)&&!l.TOptional(n)?y.False:y.True}function J(t,n){return l.TUnknown(t)?y.False:l.TAny(t)?y.Union:l.TNever(t)||l.TLiteralString(t)&&ue(n)||l.TLiteralNumber(t)&&xe(n)||l.TLiteralBoolean(t)&&ee(n)||l.TSymbol(t)&&Ue(n)||l.TBigInt(t)&&Re(n)||l.TString(t)&&ue(n)||l.TSymbol(t)&&Ue(n)||l.TNumber(t)&&xe(n)||l.TInteger(t)&&xe(n)||l.TBoolean(t)&&ee(n)||l.TUint8Array(t)&&Ne(n)||l.TDate(t)&&Ve(n)||l.TConstructor(t)&&ge(n)||l.TFunction(t)&&ye(n)?y.True:l.TRecord(t)&&l.TString(ie(t))?n[c.Hint]==="Record"?y.True:y.False:l.TRecord(t)&&l.TNumber(ie(t))?z(n,0)?y.True:y.False:y.False}function be(t,n){return r(n)?a(t,n):l.TRecord(n)?H(t,n):l.TObject(n)?(()=>{for(let K of Object.getOwnPropertyNames(n.properties)){if(!(K in t.properties)&&!l.TOptional(n.properties[K]))return y.False;if(l.TOptional(n.properties[K]))return y.True;if(Pe(t.properties[K],n.properties[K])===y.False)return y.False}return y.True})():y.False}function se(t,n){return r(n)?a(t,n):l.TObject(n)&&Ae(n)?y.True:l.TPromise(n)?e(k(t.item,n.item)):y.False}function ie(t){return c.PatternNumberExact in t.patternProperties?c.Type.Number():c.PatternStringExact in t.patternProperties?c.Type.String():o("Unknown record key pattern")}function me(t){return c.PatternNumberExact in t.patternProperties?t.patternProperties[c.PatternNumberExact]:c.PatternStringExact in t.patternProperties?t.patternProperties[c.PatternStringExact]:o("Unable to get record value schema")}function H(t,n){let[K,ne]=[ie(n),me(n)];return l.TLiteralString(t)&&l.TNumber(K)&&e(k(t,ne))===y.True?y.True:l.TUint8Array(t)&&l.TNumber(K)||l.TString(t)&&l.TNumber(K)||l.TArray(t)&&l.TNumber(K)?k(t,ne):l.TObject(t)?(()=>{for(let Ge of Object.getOwnPropertyNames(t.properties))if(Pe(ne,t.properties[Ge])===y.False)return y.False;return y.True})():y.False}function de(t,n){return r(n)?a(t,n):l.TObject(n)?J(t,n):l.TRecord(n)?k(me(t),me(n)):y.False}function X(t,n){return l.TLiteral(t)&&S.IsString(t.const)||l.TString(t)?y.True:y.False}function ae(t,n){return r(n)?a(t,n):l.TObject(n)?J(t,n):l.TRecord(n)?H(t,n):l.TString(n)?y.True:y.False}function we(t,n){return r(n)?a(t,n):l.TObject(n)?J(t,n):l.TRecord(n)?H(t,n):l.TSymbol(n)?y.True:y.False}function V(t,n){return l.TTemplateLiteral(t)?k(ve.Resolve(t),n):l.TTemplateLiteral(n)?k(t,ve.Resolve(n)):o("Invalid fallthrough for TemplateLiteral")}function i(t,n){return l.TArray(n)&&t.items!==void 0&&t.items.every(K=>k(K,n.items)===y.True)}function _(t,n){return l.TNever(t)?y.True:l.TUnknown(t)?y.False:l.TAny(t)?y.Union:y.False}function h(t,n){return r(n)?a(t,n):l.TObject(n)&&pe(n)||l.TArray(n)&&i(t,n)?y.True:l.TTuple(n)?S.IsUndefined(t.items)&&!S.IsUndefined(n.items)||!S.IsUndefined(t.items)&&S.IsUndefined(n.items)?y.False:S.IsUndefined(t.items)&&!S.IsUndefined(n.items)||t.items.every((K,ne)=>k(K,n.items[ne])===y.True)?y.True:y.False:y.False}function Je(t,n){return r(n)?a(t,n):l.TObject(n)?J(t,n):l.TRecord(n)?H(t,n):l.TUint8Array(n)?y.True:y.False}function je(t,n){return r(n)?a(t,n):l.TObject(n)?J(t,n):l.TRecord(n)?H(t,n):l.TVoid(n)?gn(t,n):l.TUndefined(n)?y.True:y.False}function We(t,n){return n.anyOf.some(K=>k(t,K)===y.True)?y.True:y.False}function Tn(t,n){return t.anyOf.every(K=>k(K,n)===y.True)?y.True:y.False}function Fe(t,n){return y.True}function yn(t,n){return l.TNever(n)?A(t,n):l.TIntersect(n)?B(t,n):l.TUnion(n)?We(t,n):l.TAny(n)?f(t,n):l.TString(n)?X(t,n):l.TNumber(n)?te(t,n):l.TInteger(n)?C(t,n):l.TBoolean(n)?I(t,n):l.TArray(n)?g(t,n):l.TTuple(n)?_(t,n):l.TObject(n)?J(t,n):l.TUnknown(n)?y.True:y.False}function gn(t,n){return l.TUndefined(t)||l.TUndefined(t)?y.True:y.False}function bn(t,n){return l.TIntersect(n)?B(t,n):l.TUnion(n)?We(t,n):l.TUnknown(n)?Fe(t,n):l.TAny(n)?f(t,n):l.TObject(n)?J(t,n):l.TVoid(n)?y.True:y.False}function k(t,n){return l.TTemplateLiteral(t)||l.TTemplateLiteral(n)?V(t,n):l.TNot(t)||l.TNot(n)?Se(t,n):l.TAny(t)?p(t,n):l.TArray(t)?O(t,n):l.TBigInt(t)?x(t,n):l.TBoolean(t)?E(t,n):l.TAsyncIterator(t)?j(t,n):l.TConstructor(t)?b(t,n):l.TDate(t)?N(t,n):l.TFunction(t)?R(t,n):l.TInteger(t)?$(t,n):l.TIntersect(t)?M(t,n):l.TIterator(t)?W(t,n):l.TLiteral(t)?D(t,n):l.TNever(t)?Q(t,n):l.TNull(t)?fe(t,n):l.TNumber(t)?oe(t,n):l.TObject(t)?be(t,n):l.TRecord(t)?de(t,n):l.TString(t)?ae(t,n):l.TSymbol(t)?we(t,n):l.TTuple(t)?h(t,n):l.TPromise(t)?se(t,n):l.TUint8Array(t)?Je(t,n):l.TUndefined(t)?je(t,n):l.TUnion(t)?Tn(t,n):l.TUnknown(t)?yn(t,n):l.TVoid(t)?bn(t,n):o(`Unknown left type operand '${t[c.Kind]}'`)}function mn(t,n){return k(t,n)}s.Extends=mn})(Le||(c.TypeExtends=Le={}));var L;(function(s){function e(O){return O.map(j=>f(j))}function o(O){return new Date(O.getTime())}function r(O){return new Uint8Array(O)}function a(O){let j=Object.getOwnPropertyNames(O).reduce((I,E)=>({...I,[E]:f(O[E])}),{}),x=Object.getOwnPropertySymbols(O).reduce((I,E)=>({...I,[E]:f(O[E])}),{});return{...j,...x}}function f(O){return S.IsArray(O)?e(O):S.IsDate(O)?o(O):S.IsUint8Array(O)?r(O):S.IsObject(O)?a(O):O}function p(O){return O.map(j=>g(j))}s.Rest=p;function g(O,j={}){return{...f(O),...j}}s.Type=g})(L||(c.TypeClone=L={}));var Pn;(function(s){function e(b){return b.map(N=>{let{[c.Optional]:R,...C}=L.Type(N);return C})}function o(b){return b.every(N=>l.TOptional(N))}function r(b){return b.some(N=>l.TOptional(N))}function a(b){return o(b.allOf)?c.Type.Optional(c.Type.Intersect(e(b.allOf))):b}function f(b){return r(b.anyOf)?c.Type.Optional(c.Type.Union(e(b.anyOf))):b}function p(b){return b[c.Kind]==="Intersect"?a(b):b[c.Kind]==="Union"?f(b):b}function g(b,N){let R=b.allOf.reduce((C,$)=>{let B=I($,N);return B[c.Kind]==="Never"?C:[...C,B]},[]);return p(c.Type.Intersect(R))}function O(b,N){let R=b.anyOf.map(C=>I(C,N));return p(c.Type.Union(R))}function j(b,N){let R=b.properties[N];return S.IsUndefined(R)?c.Type.Never():c.Type.Union([R])}function x(b,N){let R=b.items;if(S.IsUndefined(R))return c.Type.Never();let C=R[N];return S.IsUndefined(C)?c.Type.Never():C}function I(b,N){return b[c.Kind]==="Intersect"?g(b,N):b[c.Kind]==="Union"?O(b,N):b[c.Kind]==="Object"?j(b,N):b[c.Kind]==="Tuple"?x(b,N):c.Type.Never()}function E(b,N,R={}){let C=N.map($=>I(b,$.toString()));return p(c.Type.Union(C,R))}s.Resolve=E})(Pn||(c.IndexedAccessor=Pn={}));var ke;(function(s){function e(x){let[I,E]=[x.slice(0,1),x.slice(1)];return`${I.toLowerCase()}${E}`}function o(x){let[I,E]=[x.slice(0,1),x.slice(1)];return`${I.toUpperCase()}${E}`}function r(x){return x.toUpperCase()}function a(x){return x.toLowerCase()}function f(x,I){let E=De.ParseExact(x.pattern);if(!qe.Check(E))return{...x,pattern:p(x.pattern,I)};let R=[...ze.Generate(E)].map(B=>c.Type.Literal(B)),C=g(R,I),$=c.Type.Union(C);return c.Type.TemplateLiteral([$])}function p(x,I){return typeof x=="string"?I==="Uncapitalize"?e(x):I==="Capitalize"?o(x):I==="Uppercase"?r(x):I==="Lowercase"?a(x):x:x.toString()}function g(x,I){if(x.length===0)return[];let[E,...b]=x;return[j(E,I),...g(b,I)]}function O(x,I){return l.TTemplateLiteral(x)?f(x,I):l.TUnion(x)?c.Type.Union(g(x.anyOf,I)):l.TLiteral(x)?c.Type.Literal(p(x.const,I)):x}function j(x,I){return O(x,I)}s.Map=j})(ke||(c.Intrinsic=ke={}));var Me;(function(s){function e(p,g){return c.Type.Intersect(p.allOf.map(O=>a(O,g)),{...p})}function o(p,g){return c.Type.Union(p.anyOf.map(O=>a(O,g)),{...p})}function r(p,g){return g(p)}function a(p,g){return p[c.Kind]==="Intersect"?e(p,g):p[c.Kind]==="Union"?o(p,g):p[c.Kind]==="Object"?r(p,g):p}function f(p,g,O){return{...a(L.Type(p),g),...O}}s.Map=f})(Me||(c.ObjectMap=Me={}));var nn;(function(s){function e(j){return j[0]==="^"&&j[j.length-1]==="$"?j.slice(1,j.length-1):j}function o(j,x){return j.allOf.reduce((I,E)=>[...I,...p(E,x)],[])}function r(j,x){let I=j.anyOf.map(E=>p(E,x));return[...I.reduce((E,b)=>b.map(N=>I.every(R=>R.includes(N))?E.add(N):E)[0],new Set)]}function a(j,x){return Object.getOwnPropertyNames(j.properties)}function f(j,x){return x.includePatterns?Object.getOwnPropertyNames(j.patternProperties):[]}function p(j,x){return l.TIntersect(j)?o(j,x):l.TUnion(j)?r(j,x):l.TObject(j)?a(j,x):l.TRecord(j)?f(j,x):[]}function g(j,x){return[...new Set(p(j,x))]}s.ResolveKeys=g;function O(j){return`^(${g(j,{includePatterns:!0}).map(E=>`(${e(E)})`).join("|")})$`}s.ResolvePattern=O})(nn||(c.KeyResolver=nn={}));var tn=class extends ce{};c.KeyArrayResolverError=tn;var He;(function(s){function e(o){return Array.isArray(o)?o:l.TUnionLiteral(o)?o.anyOf.map(r=>r.const.toString()):l.TLiteral(o)?[o.const]:l.TTemplateLiteral(o)?(()=>{let r=De.ParseExact(o.pattern);if(!qe.Check(r))throw new tn("Cannot resolve keys from infinite template expression");return[...ze.Generate(r)]})():[]}s.Resolve=e})(He||(c.KeyArrayResolver=He={}));var wn;(function(s){function*e(r){for(let a of r.anyOf)a[c.Kind]==="Union"?yield*e(a):yield a}function o(r){return c.Type.Union([...e(r)],{...r})}s.Resolve=o})(wn||(c.UnionResolver=wn={}));var rn=class extends ce{};c.TemplateLiteralPatternError=rn;var on;(function(s){function e(f){throw new rn(f)}function o(f){return f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function r(f,p){return l.TTemplateLiteral(f)?f.pattern.slice(1,f.pattern.length-1):l.TUnion(f)?`(${f.anyOf.map(g=>r(g,p)).join("|")})`:l.TNumber(f)?`${p}${c.PatternNumber}`:l.TInteger(f)?`${p}${c.PatternNumber}`:l.TBigInt(f)?`${p}${c.PatternNumber}`:l.TString(f)?`${p}${c.PatternString}`:l.TLiteral(f)?`${p}${o(f.const.toString())}`:l.TBoolean(f)?`${p}${c.PatternBoolean}`:e(`Unexpected Kind '${f[c.Kind]}'`)}function a(f){return`^${f.map(p=>r(p,"")).join("")}$`}s.Create=a})(on||(c.TemplateLiteralPattern=on={}));var ve;(function(s){function e(o){let r=De.ParseExact(o.pattern);if(!qe.Check(r))return c.Type.String();let a=[...ze.Generate(r)].map(f=>c.Type.Literal(f));return c.Type.Union(a)}s.Resolve=e})(ve||(c.TemplateLiteralResolver=ve={}));var Ze=class extends ce{};c.TemplateLiteralParserError=Ze;var De;(function(s){function e(b,N,R){return b[N]===R&&b.charCodeAt(N-1)!==92}function o(b,N){return e(b,N,"(")}function r(b,N){return e(b,N,")")}function a(b,N){return e(b,N,"|")}function f(b){if(!(o(b,0)&&r(b,b.length-1)))return!1;let N=0;for(let R=0;R<b.length;R++)if(o(b,R)&&(N+=1),r(b,R)&&(N-=1),N===0&&R!==b.length-1)return!1;return!0}function p(b){return b.slice(1,b.length-1)}function g(b){let N=0;for(let R=0;R<b.length;R++)if(o(b,R)&&(N+=1),r(b,R)&&(N-=1),a(b,R)&&N===0)return!0;return!1}function O(b){for(let N=0;N<b.length;N++)if(o(b,N))return!0;return!1}function j(b){let[N,R]=[0,0],C=[];for(let B=0;B<b.length;B++)if(o(b,B)&&(N+=1),r(b,B)&&(N-=1),a(b,B)&&N===0){let M=b.slice(R,B);M.length>0&&C.push(I(M)),R=B+1}let $=b.slice(R);return $.length>0&&C.push(I($)),C.length===0?{type:"const",const:""}:C.length===1?C[0]:{type:"or",expr:C}}function x(b){function N($,B){if(!o($,B))throw new Ze("TemplateLiteralParser: Index must point to open parens");let M=0;for(let W=B;W<$.length;W++)if(o($,W)&&(M+=1),r($,W)&&(M-=1),M===0)return[B,W];throw new Ze("TemplateLiteralParser: Unclosed group parens in expression")}function R($,B){for(let M=B;M<$.length;M++)if(o($,M))return[B,M];return[B,$.length]}let C=[];for(let $=0;$<b.length;$++)if(o(b,$)){let[B,M]=N(b,$),W=b.slice(B,M+1);C.push(I(W)),$=M}else{let[B,M]=R(b,$),W=b.slice(B,M);W.length>0&&C.push(I(W)),$=M-1}return C.length===0?{type:"const",const:""}:C.length===1?C[0]:{type:"and",expr:C}}function I(b){return f(b)?I(p(b)):g(b)?j(b):O(b)?x(b):{type:"const",const:b}}s.Parse=I;function E(b){return I(b.slice(1,b.length-1))}s.ParseExact=E})(De||(c.TemplateLiteralParser=De={}));var un=class extends ce{};c.TemplateLiteralFiniteError=un;var qe;(function(s){function e(p){throw new un(p)}function o(p){return p.type==="or"&&p.expr.length===2&&p.expr[0].type==="const"&&p.expr[0].const==="0"&&p.expr[1].type==="const"&&p.expr[1].const==="[1-9][0-9]*"}function r(p){return p.type==="or"&&p.expr.length===2&&p.expr[0].type==="const"&&p.expr[0].const==="true"&&p.expr[1].type==="const"&&p.expr[1].const==="false"}function a(p){return p.type==="const"&&p.const===".*"}function f(p){return r(p)?!0:o(p)||a(p)?!1:p.type==="and"?p.expr.every(g=>f(g)):p.type==="or"?p.expr.every(g=>f(g)):p.type==="const"?!0:e("Unknown expression type")}s.Check=f})(qe||(c.TemplateLiteralFinite=qe={}));var sn=class extends ce{};c.TemplateLiteralGeneratorError=sn;var ze;(function(s){function*e(p){if(p.length===1)return yield*p[0];for(let g of p[0])for(let O of e(p.slice(1)))yield`${g}${O}`}function*o(p){return yield*e(p.expr.map(g=>[...f(g)]))}function*r(p){for(let g of p.expr)yield*f(g)}function*a(p){return yield p.const}function*f(p){return p.type==="and"?yield*o(p):p.type==="or"?yield*r(p):p.type==="const"?yield*a(p):(()=>{throw new sn("Unknown expression")})()}s.Generate=f})(ze||(c.TemplateLiteralGenerator=ze={}));var Sn;(function(s){function*e(f){let p=f.trim().replace(/"|'/g,"");return p==="boolean"?yield c.Type.Boolean():p==="number"?yield c.Type.Number():p==="bigint"?yield c.Type.BigInt():p==="string"?yield c.Type.String():yield(()=>{let g=p.split("|").map(O=>c.Type.Literal(O.trim()));return g.length===0?c.Type.Never():g.length===1?g[0]:c.Type.Union(g)})()}function*o(f){if(f[1]!=="{"){let p=c.Type.Literal("$"),g=r(f.slice(1));return yield*[p,...g]}for(let p=2;p<f.length;p++)if(f[p]==="}"){let g=e(f.slice(2,p)),O=r(f.slice(p+1));return yield*[...g,...O]}yield c.Type.Literal(f)}function*r(f){for(let p=0;p<f.length;p++)if(f[p]==="$"){let g=c.Type.Literal(f.slice(0,p)),O=o(f.slice(p));return yield*[g,...O]}yield c.Type.Literal(f)}function a(f){return[...r(f)]}s.Parse=a})(Sn||(c.TemplateLiteralDslParser=Sn={}));var an=class{constructor(e){this.schema=e}Decode(e){return new cn(this.schema,e)}};c.TransformDecodeBuilder=an;var cn=class{constructor(e,o){this.schema=e,this.decode=o}Encode(e){let o=L.Type(this.schema);return l.TTransform(o)?(()=>{let f={Encode:p=>o[c.Transform].Encode(e(p)),Decode:p=>this.decode(o[c.Transform].Decode(p))};return{...o,[c.Transform]:f}})():(()=>{let r={Decode:this.decode,Encode:e};return{...o,[c.Transform]:r}})()}};c.TransformEncodeBuilder=cn;var tt=0,ln=class extends ce{};c.TypeBuilderError=ln;var fn=class{Create(e){return e}Throw(e){throw new ln(e)}Discard(e,o){return o.reduce((r,a)=>{let{[a]:f,...p}=r;return p},e)}Strict(e){return JSON.parse(JSON.stringify(e))}};c.TypeBuilder=fn;var Qe=class extends fn{ReadonlyOptional(e){return this.Readonly(this.Optional(e))}Readonly(e){return{...L.Type(e),[c.Readonly]:"Readonly"}}Optional(e){return{...L.Type(e),[c.Optional]:"Optional"}}Any(e={}){return this.Create({...e,[c.Kind]:"Any"})}Array(e,o={}){return this.Create({...o,[c.Kind]:"Array",type:"array",items:L.Type(e)})}Boolean(e={}){return this.Create({...e,[c.Kind]:"Boolean",type:"boolean"})}Capitalize(e,o={}){return{...ke.Map(L.Type(e),"Capitalize"),...o}}Composite(e,o){let r=c.Type.Intersect(e,{}),f=nn.ResolveKeys(r,{includePatterns:!1}).reduce((p,g)=>({...p,[g]:c.Type.Index(r,[g])}),{});return c.Type.Object(f,o)}Enum(e,o={}){if(S.IsUndefined(e))return this.Throw("Enum undefined or empty");let r=Object.getOwnPropertyNames(e).filter(p=>isNaN(p)).map(p=>e[p]),f=[...new Set(r)].map(p=>c.Type.Literal(p));return this.Union(f,{...o,[c.Hint]:"Enum"})}Extends(e,o,r,a,f={}){switch(Le.Extends(e,o)){case y.Union:return this.Union([L.Type(r,f),L.Type(a,f)]);case y.True:return L.Type(r,f);case y.False:return L.Type(a,f)}}Exclude(e,o,r={}){return l.TTemplateLiteral(e)?this.Exclude(ve.Resolve(e),o,r):l.TTemplateLiteral(o)?this.Exclude(e,ve.Resolve(o),r):l.TUnion(e)?(()=>{let a=e.anyOf.filter(f=>Le.Extends(f,o)===y.False);return a.length===1?L.Type(a[0],r):this.Union(a,r)})():Le.Extends(e,o)!==y.False?this.Never(r):L.Type(e,r)}Extract(e,o,r={}){return l.TTemplateLiteral(e)?this.Extract(ve.Resolve(e),o,r):l.TTemplateLiteral(o)?this.Extract(e,ve.Resolve(o),r):l.TUnion(e)?(()=>{let a=e.anyOf.filter(f=>Le.Extends(f,o)!==y.False);return a.length===1?L.Type(a[0],r):this.Union(a,r)})():Le.Extends(e,o)!==y.False?L.Type(e,r):this.Never(r)}Index(e,o,r={}){return l.TArray(e)&&l.TNumber(o)?L.Type(e.items,r):l.TTuple(e)&&l.TNumber(o)?(()=>{let f=(S.IsUndefined(e.items)?[]:e.items).map(p=>L.Type(p));return this.Union(f,r)})():(()=>{let a=He.Resolve(o),f=L.Type(e);return Pn.Resolve(f,a,r)})()}Integer(e={}){return this.Create({...e,[c.Kind]:"Integer",type:"integer"})}Intersect(e,o={}){if(e.length===0)return c.Type.Never();if(e.length===1)return L.Type(e[0],o);e.some(p=>l.TTransform(p))&&this.Throw("Cannot intersect transform types");let r=e.every(p=>l.TObject(p)),a=L.Rest(e),f=l.TSchema(o.unevaluatedProperties)?{unevaluatedProperties:L.Type(o.unevaluatedProperties)}:{};return o.unevaluatedProperties===!1||l.TSchema(o.unevaluatedProperties)||r?this.Create({...o,...f,[c.Kind]:"Intersect",type:"object",allOf:a}):this.Create({...o,...f,[c.Kind]:"Intersect",allOf:a})}KeyOf(e,o={}){return l.TRecord(e)?(()=>{let r=Object.getOwnPropertyNames(e.patternProperties)[0];return r===c.PatternNumberExact?this.Number(o):r===c.PatternStringExact?this.String(o):this.Throw("Unable to resolve key type from Record key pattern")})():l.TTuple(e)?(()=>{let a=(S.IsUndefined(e.items)?[]:e.items).map((f,p)=>c.Type.Literal(p.toString()));return this.Union(a,o)})():l.TArray(e)?this.Number(o):(()=>{let r=nn.ResolveKeys(e,{includePatterns:!1});if(r.length===0)return this.Never(o);let a=r.map(f=>this.Literal(f));return this.Union(a,o)})()}Literal(e,o={}){return this.Create({...o,[c.Kind]:"Literal",const:e,type:typeof e})}Lowercase(e,o={}){return{...ke.Map(L.Type(e),"Lowercase"),...o}}Never(e={}){return this.Create({...e,[c.Kind]:"Never",not:{}})}Not(e,o){return this.Create({...o,[c.Kind]:"Not",not:L.Type(e)})}Null(e={}){return this.Create({...e,[c.Kind]:"Null",type:"null"})}Number(e={}){return this.Create({...e,[c.Kind]:"Number",type:"number"})}Object(e,o={}){let r=Object.getOwnPropertyNames(e),a=r.filter(O=>l.TOptional(e[O])),f=r.filter(O=>!a.includes(O)),p=l.TSchema(o.additionalProperties)?{additionalProperties:L.Type(o.additionalProperties)}:{},g=r.reduce((O,j)=>({...O,[j]:L.Type(e[j])}),{});return f.length>0?this.Create({...o,...p,[c.Kind]:"Object",type:"object",properties:g,required:f}):this.Create({...o,...p,[c.Kind]:"Object",type:"object",properties:g})}Omit(e,o,r={}){let a=He.Resolve(o);return Me.Map(this.Discard(L.Type(e),["$id",c.Transform]),f=>{S.IsArray(f.required)&&(f.required=f.required.filter(p=>!a.includes(p)),f.required.length===0&&delete f.required);for(let p of Object.getOwnPropertyNames(f.properties))a.includes(p)&&delete f.properties[p];return this.Create(f)},r)}Partial(e,o={}){return Me.Map(this.Discard(L.Type(e),["$id",c.Transform]),r=>{let a=Object.getOwnPropertyNames(r.properties).reduce((f,p)=>({...f,[p]:this.Optional(r.properties[p])}),{});return this.Object(a,this.Discard(r,["required"]))},o)}Pick(e,o,r={}){let a=He.Resolve(o);return Me.Map(this.Discard(L.Type(e),["$id",c.Transform]),f=>{S.IsArray(f.required)&&(f.required=f.required.filter(p=>a.includes(p)),f.required.length===0&&delete f.required);for(let p of Object.getOwnPropertyNames(f.properties))a.includes(p)||delete f.properties[p];return this.Create(f)},r)}Record(e,o,r={}){return l.TTemplateLiteral(e)?(()=>{let a=De.ParseExact(e.pattern);return qe.Check(a)?this.Object([...ze.Generate(a)].reduce((f,p)=>({...f,[p]:L.Type(o)}),{}),r):this.Create({...r,[c.Kind]:"Record",type:"object",patternProperties:{[e.pattern]:L.Type(o)}})})():l.TUnion(e)?(()=>{let a=wn.Resolve(e);if(l.TUnionLiteral(a)){let f=a.anyOf.reduce((p,g)=>({...p,[g.const]:L.Type(o)}),{});return this.Object(f,{...r,[c.Hint]:"Record"})}else this.Throw("Record key of type union contains non-literal types")})():l.TLiteral(e)?S.IsString(e.const)||S.IsNumber(e.const)?this.Object({[e.const]:L.Type(o)},r):this.Throw("Record key of type literal is not of type string or number"):l.TInteger(e)||l.TNumber(e)?this.Create({...r,[c.Kind]:"Record",type:"object",patternProperties:{[c.PatternNumberExact]:L.Type(o)}}):l.TString(e)?(()=>{let a=S.IsUndefined(e.pattern)?c.PatternStringExact:e.pattern;return this.Create({...r,[c.Kind]:"Record",type:"object",patternProperties:{[a]:L.Type(o)}})})():this.Never()}Recursive(e,o={}){S.IsUndefined(o.$id)&&(o.$id=`T${tt++}`);let r=e({[c.Kind]:"This",$ref:`${o.$id}`});return r.$id=o.$id,this.Create({...o,[c.Hint]:"Recursive",...r})}Ref(e,o={}){return S.IsString(e)?this.Create({...o,[c.Kind]:"Ref",$ref:e}):(S.IsUndefined(e.$id)&&this.Throw("Reference target type must specify an $id"),this.Create({...o,[c.Kind]:"Ref",$ref:e.$id}))}Required(e,o={}){return Me.Map(this.Discard(L.Type(e),["$id",c.Transform]),r=>{let a=Object.getOwnPropertyNames(r.properties).reduce((f,p)=>({...f,[p]:this.Discard(r.properties[p],[c.Optional])}),{});return this.Object(a,r)},o)}Rest(e){return l.TTuple(e)&&!S.IsUndefined(e.items)?L.Rest(e.items):l.TIntersect(e)?L.Rest(e.allOf):l.TUnion(e)?L.Rest(e.anyOf):[]}String(e={}){return this.Create({...e,[c.Kind]:"String",type:"string"})}TemplateLiteral(e,o={}){let r=S.IsString(e)?on.Create(Sn.Parse(e)):on.Create(e);return this.Create({...o,[c.Kind]:"TemplateLiteral",type:"string",pattern:r})}Transform(e){return new an(e)}Tuple(e,o={}){let[r,a,f]=[!1,e.length,e.length],p=L.Rest(e),g=e.length>0?{...o,[c.Kind]:"Tuple",type:"array",items:p,additionalItems:r,minItems:a,maxItems:f}:{...o,[c.Kind]:"Tuple",type:"array",minItems:a,maxItems:f};return this.Create(g)}Uncapitalize(e,o={}){return{...ke.Map(L.Type(e),"Uncapitalize"),...o}}Union(e,o={}){return l.TTemplateLiteral(e)?ve.Resolve(e):(()=>{let r=e;if(r.length===0)return this.Never(o);if(r.length===1)return this.Create(L.Type(r[0],o));let a=L.Rest(r);return this.Create({...o,[c.Kind]:"Union",anyOf:a})})()}Unknown(e={}){return this.Create({...e,[c.Kind]:"Unknown"})}Unsafe(e={}){return this.Create({...e,[c.Kind]:e[c.Kind]||"Unsafe"})}Uppercase(e,o={}){return{...ke.Map(L.Type(e),"Uppercase"),...o}}};c.JsonTypeBuilder=Qe;var pn=class extends Qe{AsyncIterator(e,o={}){return this.Create({...o,[c.Kind]:"AsyncIterator",type:"AsyncIterator",items:L.Type(e)})}Awaited(e,o={}){let r=a=>a.length>0?(()=>{let[f,...p]=a;return[this.Awaited(f),...r(p)]})():a;return l.TIntersect(e)?c.Type.Intersect(r(e.allOf)):l.TUnion(e)?c.Type.Union(r(e.anyOf)):l.TPromise(e)?this.Awaited(e.item):L.Type(e,o)}BigInt(e={}){return this.Create({...e,[c.Kind]:"BigInt",type:"bigint"})}ConstructorParameters(e,o={}){return this.Tuple([...e.parameters],{...o})}Constructor(e,o,r){let[a,f]=[L.Rest(e),L.Type(o)];return this.Create({...r,[c.Kind]:"Constructor",type:"Constructor",parameters:a,returns:f})}Date(e={}){return this.Create({...e,[c.Kind]:"Date",type:"Date"})}Function(e,o,r){let[a,f]=[L.Rest(e),L.Type(o)];return this.Create({...r,[c.Kind]:"Function",type:"Function",parameters:a,returns:f})}InstanceType(e,o={}){return L.Type(e.returns,o)}Iterator(e,o={}){return this.Create({...o,[c.Kind]:"Iterator",type:"Iterator",items:L.Type(e)})}Parameters(e,o={}){return this.Tuple(e.parameters,{...o})}Promise(e,o={}){return this.Create({...o,[c.Kind]:"Promise",type:"Promise",item:L.Type(e)})}RegExp(e,o={}){let r=S.IsString(e)?e:e.source;return this.Create({...o,[c.Kind]:"String",type:"string",pattern:r})}RegEx(e,o={}){return this.RegExp(e,o)}ReturnType(e,o={}){return L.Type(e.returns,o)}Symbol(e){return this.Create({...e,[c.Kind]:"Symbol",type:"symbol"})}Undefined(e={}){return this.Create({...e,[c.Kind]:"Undefined",type:"undefined"})}Uint8Array(e={}){return this.Create({...e,[c.Kind]:"Uint8Array",type:"Uint8Array"})}Void(e={}){return this.Create({...e,[c.Kind]:"Void",type:"void"})}};c.JavaScriptTypeBuilder=pn;c.JsonType=new Qe;c.Type=new pn});var Bn=In((Xe,Un)=>{(function(s,e){typeof Xe=="object"&&typeof Un=="object"?Un.exports=e():typeof define=="function"&&define.amd?define([],e):typeof Xe=="object"?Xe.Parsimmon=e():s.Parsimmon=e()})(typeof self<"u"?self:Xe,function(){return function(s){var e={};function o(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return s[r].call(a.exports,a,a.exports,o),a.l=!0,a.exports}return o.m=s,o.c=e,o.d=function(r,a,f){o.o(r,a)||Object.defineProperty(r,a,{configurable:!1,enumerable:!0,get:f})},o.r=function(r){Object.defineProperty(r,"__esModule",{value:!0})},o.n=function(r){var a=r&&r.__esModule?function(){return r.default}:function(){return r};return o.d(a,"a",a),a},o.o=function(r,a){return Object.prototype.hasOwnProperty.call(r,a)},o.p="",o(o.s=0)}([function(s,e,o){"use strict";function r(u){if(!(this instanceof r))return new r(u);this._=u}var a=r.prototype;function f(u,d){for(var T=0;T<u;T++)d(T)}function p(u,d,T){return function(m,v){f(v.length,function(P){m(v[P],P,v)})}(function(m,v,P){d=u(d,m,v,P)},T),d}function g(u,d){return p(function(T,m,v,P){return T.concat([u(m,v,P)])},[],d)}function O(u,d){var T={v:0,buf:d};return f(u,function(){var m;T={v:T.v<<1|(m=T.buf,m[0]>>7),buf:function(v){var P=p(function(w,F,q,G){return w.concat(q===G.length-1?Buffer.from([F,0]).readUInt16BE(0):G.readUInt16BE(q))},[],v);return Buffer.from(g(function(w){return(w<<1&65535)>>8},P))}(T.buf)}}),T}function j(){return typeof Buffer<"u"}function x(){if(!j())throw new Error("Buffer global does not exist; please use webpack if you need to parse Buffers in the browser.")}function I(u){x();var d=p(function(P,w){return P+w},0,u);if(d%8!=0)throw new Error("The bits ["+u.join(", ")+"] add up to "+d+" which is not an even number of bytes; the total should be divisible by 8");var T,m=d/8,v=(T=function(P){return P>48},p(function(P,w){return P||(T(w)?w:P)},null,u));if(v)throw new Error(v+" bit range requested exceeds 48 bit (6 byte) Number max.");return new r(function(P,w){var F=m+w;return F>P.length?A(w,m.toString()+" bytes"):D(F,p(function(q,G){var Y=O(G,q.buf);return{coll:q.coll.concat(Y.v),buf:Y.buf}},{coll:[],buf:P.slice(w,F)},u).coll)})}function E(u,d){return new r(function(T,m){return x(),m+d>T.length?A(m,d+" bytes for "+u):D(m+d,T.slice(m,m+d))})}function b(u,d){if(typeof(T=d)!="number"||Math.floor(T)!==T||d<0||d>6)throw new Error(u+" requires integer length in range [0, 6].");var T}function N(u){return b("uintBE",u),E("uintBE("+u+")",u).map(function(d){return d.readUIntBE(0,u)})}function R(u){return b("uintLE",u),E("uintLE("+u+")",u).map(function(d){return d.readUIntLE(0,u)})}function C(u){return b("intBE",u),E("intBE("+u+")",u).map(function(d){return d.readIntBE(0,u)})}function $(u){return b("intLE",u),E("intLE("+u+")",u).map(function(d){return d.readIntLE(0,u)})}function B(u){return u instanceof r}function M(u){return{}.toString.call(u)==="[object Array]"}function W(u){return j()&&Buffer.isBuffer(u)}function D(u,d){return{status:!0,index:u,value:d,furthest:-1,expected:[]}}function A(u,d){return M(d)||(d=[d]),{status:!1,index:-1,value:null,furthest:u,expected:d}}function Q(u,d){if(!d||u.furthest>d.furthest)return u;var T=u.furthest===d.furthest?function(m,v){if(function(){if(r._supportsSet!==void 0)return r._supportsSet;var Oe=typeof Set<"u";return r._supportsSet=Oe,Oe}()&&Array.from){for(var P=new Set(m),w=0;w<v.length;w++)P.add(v[w]);var F=Array.from(P);return F.sort(),F}for(var q={},G=0;G<m.length;G++)q[m[G]]=!0;for(var Y=0;Y<v.length;Y++)q[v[Y]]=!0;var Ie=[];for(var re in q)({}).hasOwnProperty.call(q,re)&&Ie.push(re);return Ie.sort(),Ie}(u.expected,d.expected):d.expected;return{status:u.status,index:u.index,value:u.value,furthest:d.furthest,expected:T}}var le={};function Se(u,d){if(W(u))return{offset:d,line:-1,column:-1};u in le||(le[u]={});for(var T=le[u],m=0,v=0,P=0,w=d;w>=0;){if(w in T){m=T[w].line,P===0&&(P=T[w].lineStart);break}(u.charAt(w)===`
`||u.charAt(w)==="\r"&&u.charAt(w+1)!==`
`)&&(v++,P===0&&(P=w+1)),w--}var F=m+v,q=d-P;return T[d]={line:F,lineStart:P},{offset:d,line:F+1,column:q+1}}function fe(u){if(!B(u))throw new Error("not a parser: "+u)}function te(u,d){return typeof u=="string"?u.charAt(d):u[d]}function oe(u){if(typeof u!="number")throw new Error("not a number: "+u)}function z(u){if(typeof u!="function")throw new Error("not a function: "+u)}function ue(u){if(typeof u!="string")throw new Error("not a string: "+u)}var Ue=2,xe=3,ee=8,Re=5*ee,Ve=4*ee,Ne="  ";function ye(u,d){return new Array(d+1).join(u)}function ge(u,d,T){var m=d-u.length;return m<=0?u:ye(T,m)+u}function pe(u,d,T,m){return{from:u-d>0?u-d:0,to:u+T>m?m:u+T}}function Ae(u,d){var T,m,v,P,w,F=d.index,q=F.offset,G=1;if(q===u.length)return"Got the end of the input";if(W(u)){var Y=q-q%ee,Ie=q-Y,re=pe(Y,Re,Ve+ee,u.length),Oe=g(function(Z){return g(function(Be){return ge(Be.toString(16),2,"0")},Z)},function(Z,Be){var $e=Z.length,Ee=[],Ke=0;if($e<=Be)return[Z.slice()];for(var _e=0;_e<$e;_e++)Ee[Ke]||Ee.push([]),Ee[Ke].push(Z[_e]),(_e+1)%Be==0&&Ke++;return Ee}(u.slice(re.from,re.to).toJSON().data,ee));P=function(Z){return Z.from===0&&Z.to===1?{from:Z.from,to:Z.to}:{from:Z.from/ee,to:Math.floor(Z.to/ee)}}(re),m=Y/ee,T=3*Ie,Ie>=4&&(T+=1),G=2,v=g(function(Z){return Z.length<=4?Z.join(" "):Z.slice(0,4).join(" ")+"  "+Z.slice(4).join(" ")},Oe),(w=(8*(P.to>0?P.to-1:P.to)).toString(16).length)<2&&(w=2)}else{var Ce=u.split(/\r\n|[\n\r\u2028\u2029]/);T=F.column-1,m=F.line-1,P=pe(m,Ue,xe,Ce.length),v=Ce.slice(P.from,P.to),w=P.to.toString().length}var Qn=m-P.from;return W(u)&&(w=(8*(P.to>0?P.to-1:P.to)).toString(16).length)<2&&(w=2),p(function(Z,Be,$e){var Ee,Ke=$e===Qn,_e=Ke?"> ":Ne;return Ee=W(u)?ge((8*(P.from+$e)).toString(16),w,"0"):ge((P.from+$e+1).toString(),w," "),[].concat(Z,[_e+Ee+" | "+Be],Ke?[Ne+ye(" ",w)+" | "+ge("",T," ")+ye("^",G)]:[])},[],v).join(`
`)}function Pe(u,d){return[`
`,"-- PARSING FAILED "+ye("-",50),`

`,Ae(u,d),`

`,(T=d.expected,T.length===1?`Expected:

`+T[0]:`Expected one of the following: 

`+T.join(", ")),`
`].join("");var T}function J(u){return u.flags!==void 0?u.flags:[u.global?"g":"",u.ignoreCase?"i":"",u.multiline?"m":"",u.unicode?"u":"",u.sticky?"y":""].join("")}function be(){for(var u=[].slice.call(arguments),d=u.length,T=0;T<d;T+=1)fe(u[T]);return r(function(m,v){for(var P,w=new Array(d),F=0;F<d;F+=1){if(!(P=Q(u[F]._(m,v),P)).status)return P;w[F]=P.value,v=P.index}return Q(D(v,w),P)})}function se(){var u=[].slice.call(arguments);if(u.length===0)throw new Error("seqMap needs at least one argument");var d=u.pop();return z(d),be.apply(null,u).map(function(T){return d.apply(null,T)})}function ie(){var u=[].slice.call(arguments),d=u.length;if(d===0)return we("zero alternates");for(var T=0;T<d;T+=1)fe(u[T]);return r(function(m,v){for(var P,w=0;w<u.length;w+=1)if((P=Q(u[w]._(m,v),P)).status)return P;return P})}function me(u,d){return H(u,d).or(ae([]))}function H(u,d){return fe(u),fe(d),se(u,d.then(u).many(),function(T,m){return[T].concat(m)})}function de(u){ue(u);var d="'"+u+"'";return r(function(T,m){var v=m+u.length,P=T.slice(m,v);return P===u?D(v,P):A(m,d)})}function X(u,d){(function(v){if(!(v instanceof RegExp))throw new Error("not a regexp: "+v);for(var P=J(v),w=0;w<P.length;w++){var F=P.charAt(w);if(F!=="i"&&F!=="m"&&F!=="u"&&F!=="s")throw new Error('unsupported regexp flag "'+F+'": '+v)}})(u),arguments.length>=2?oe(d):d=0;var T=function(v){return RegExp("^(?:"+v.source+")",J(v))}(u),m=""+u;return r(function(v,P){var w=T.exec(v.slice(P));if(w){if(0<=d&&d<=w.length){var F=w[0],q=w[d];return D(P+F.length,q)}return A(P,"valid match group (0 to "+w.length+") in "+m)}return A(P,m)})}function ae(u){return r(function(d,T){return D(T,u)})}function we(u){return r(function(d,T){return A(T,u)})}function V(u){if(B(u))return r(function(d,T){var m=u._(d,T);return m.index=T,m.value="",m});if(typeof u=="string")return V(de(u));if(u instanceof RegExp)return V(X(u));throw new Error("not a string, regexp, or parser: "+u)}function i(u){return fe(u),r(function(d,T){var m=u._(d,T),v=d.slice(T,m.index);return m.status?A(T,'not "'+v+'"'):D(T,null)})}function _(u){return z(u),r(function(d,T){var m=te(d,T);return T<d.length&&u(m)?D(T+1,m):A(T,"a character/byte matching "+u)})}function h(u,d){arguments.length<2&&(d=u,u=void 0);var T=r(function(m,v){return T._=d()._,T._(m,v)});return u?T.desc(u):T}function Je(){return we("fantasy-land/empty")}a.parse=function(u){if(typeof u!="string"&&!W(u))throw new Error(".parse must be called with a string or Buffer as its argument");var d,T=this.skip(Fe)._(u,0);return d=T.status?{status:!0,value:T.value}:{status:!1,index:Se(u,T.furthest),expected:T.expected},delete le[u],d},a.tryParse=function(u){var d=this.parse(u);if(d.status)return d.value;var T=Pe(u,d),m=new Error(T);throw m.type="ParsimmonError",m.result=d,m},a.assert=function(u,d){return this.chain(function(T){return u(T)?ae(T):we(d)})},a.or=function(u){return ie(this,u)},a.trim=function(u){return this.wrap(u,u)},a.wrap=function(u,d){return se(u,this,d,function(T,m){return m})},a.thru=function(u){return u(this)},a.then=function(u){return fe(u),be(this,u).map(function(d){return d[1]})},a.many=function(){var u=this;return r(function(d,T){for(var m=[],v=void 0;;){if(!(v=Q(u._(d,T),v)).status)return Q(D(T,m),v);if(T===v.index)throw new Error("infinite loop detected in .many() parser --- calling .many() on a parser which can accept zero characters is usually the cause");T=v.index,m.push(v.value)}})},a.tieWith=function(u){return ue(u),this.map(function(d){if(function(v){if(!M(v))throw new Error("not an array: "+v)}(d),d.length){ue(d[0]);for(var T=d[0],m=1;m<d.length;m++)ue(d[m]),T+=u+d[m];return T}return""})},a.tie=function(){return this.tieWith("")},a.times=function(u,d){var T=this;return arguments.length<2&&(d=u),oe(u),oe(d),r(function(m,v){for(var P=[],w=void 0,F=void 0,q=0;q<u;q+=1){if(F=Q(w=T._(m,v),F),!w.status)return F;v=w.index,P.push(w.value)}for(;q<d&&(F=Q(w=T._(m,v),F),w.status);q+=1)v=w.index,P.push(w.value);return Q(D(v,P),F)})},a.result=function(u){return this.map(function(){return u})},a.atMost=function(u){return this.times(0,u)},a.atLeast=function(u){return se(this.times(u),this.many(),function(d,T){return d.concat(T)})},a.map=function(u){z(u);var d=this;return r(function(T,m){var v=d._(T,m);return v.status?Q(D(v.index,u(v.value)),v):v})},a.contramap=function(u){z(u);var d=this;return r(function(T,m){var v=d.parse(u(T.slice(m)));return v.status?D(m+T.length,v.value):v})},a.promap=function(u,d){return z(u),z(d),this.contramap(u).map(d)},a.skip=function(u){return be(this,u).map(function(d){return d[0]})},a.mark=function(){return se(je,this,je,function(u,d,T){return{start:u,value:d,end:T}})},a.node=function(u){return se(je,this,je,function(d,T,m){return{name:u,value:T,start:d,end:m}})},a.sepBy=function(u){return me(this,u)},a.sepBy1=function(u){return H(this,u)},a.lookahead=function(u){return this.skip(V(u))},a.notFollowedBy=function(u){return this.skip(i(u))},a.desc=function(u){M(u)||(u=[u]);var d=this;return r(function(T,m){var v=d._(T,m);return v.status||(v.expected=u),v})},a.fallback=function(u){return this.or(ae(u))},a.ap=function(u){return se(u,this,function(d,T){return d(T)})},a.chain=function(u){var d=this;return r(function(T,m){var v=d._(T,m);return v.status?Q(u(v.value)._(T,v.index),v):v})},a.concat=a.or,a.empty=Je,a.of=ae,a["fantasy-land/ap"]=a.ap,a["fantasy-land/chain"]=a.chain,a["fantasy-land/concat"]=a.concat,a["fantasy-land/empty"]=a.empty,a["fantasy-land/of"]=a.of,a["fantasy-land/map"]=a.map;var je=r(function(u,d){return D(d,Se(u,d))}),We=r(function(u,d){return d>=u.length?A(d,"any character/byte"):D(d+1,te(u,d))}),Tn=r(function(u,d){return D(u.length,u.slice(d))}),Fe=r(function(u,d){return d<u.length?A(d,"EOF"):D(d,null)}),yn=X(/[0-9]/).desc("a digit"),gn=X(/[0-9]*/).desc("optional digits"),bn=X(/[a-z]/i).desc("a letter"),k=X(/[a-z]*/i).desc("optional letters"),mn=X(/\s*/).desc("optional whitespace"),t=X(/\s+/).desc("whitespace"),n=de("\r"),K=de(`
`),ne=de(`\r
`),Ge=ie(ne,K,n).desc("newline"),Zn=ie(Ge,Fe);r.all=Tn,r.alt=ie,r.any=We,r.cr=n,r.createLanguage=function(u){var d={};for(var T in u)({}).hasOwnProperty.call(u,T)&&function(m){d[m]=h(function(){return u[m](d)})}(T);return d},r.crlf=ne,r.custom=function(u){return r(u(D,A))},r.digit=yn,r.digits=gn,r.empty=Je,r.end=Zn,r.eof=Fe,r.fail=we,r.formatError=Pe,r.index=je,r.isParser=B,r.lazy=h,r.letter=bn,r.letters=k,r.lf=K,r.lookahead=V,r.makeFailure=A,r.makeSuccess=D,r.newline=Ge,r.noneOf=function(u){return _(function(d){return u.indexOf(d)<0}).desc("none of '"+u+"'")},r.notFollowedBy=i,r.of=ae,r.oneOf=function(u){for(var d=u.split(""),T=0;T<d.length;T++)d[T]="'"+d[T]+"'";return _(function(m){return u.indexOf(m)>=0}).desc(d)},r.optWhitespace=mn,r.Parser=r,r.range=function(u,d){return _(function(T){return u<=T&&T<=d}).desc(u+"-"+d)},r.regex=X,r.regexp=X,r.sepBy=me,r.sepBy1=H,r.seq=be,r.seqMap=se,r.seqObj=function(){for(var u,d={},T=0,m=(u=arguments,Array.prototype.slice.call(u)),v=m.length,P=0;P<v;P+=1){var w=m[P];if(!B(w)){if(M(w)&&w.length===2&&typeof w[0]=="string"&&B(w[1])){var F=w[0];if(Object.prototype.hasOwnProperty.call(d,F))throw new Error("seqObj: duplicate key "+F);d[F]=!0,T++;continue}throw new Error("seqObj arguments must be parsers or [string, parser] array pairs.")}}if(T===0)throw new Error("seqObj expects at least one named parser, found zero");return r(function(q,G){for(var Y,Ie={},re=0;re<v;re+=1){var Oe,Ce;if(M(m[re])?(Oe=m[re][0],Ce=m[re][1]):(Oe=null,Ce=m[re]),!(Y=Q(Ce._(q,G),Y)).status)return Y;Oe&&(Ie[Oe]=Y.value),G=Y.index}return Q(D(G,Ie),Y)})},r.string=de,r.succeed=ae,r.takeWhile=function(u){return z(u),r(function(d,T){for(var m=T;m<d.length&&u(te(d,m));)m++;return D(m,d.slice(T,m))})},r.test=_,r.whitespace=t,r["fantasy-land/empty"]=Je,r["fantasy-land/of"]=ae,r.Binary={bitSeq:I,bitSeqObj:function(u){x();var d={},T=0,m=g(function(P){if(M(P)){var w=P;if(w.length!==2)throw new Error("["+w.join(", ")+"] should be length 2, got length "+w.length);if(ue(w[0]),oe(w[1]),Object.prototype.hasOwnProperty.call(d,w[0]))throw new Error("duplicate key in bitSeqObj: "+w[0]);return d[w[0]]=!0,T++,w}return oe(P),[null,P]},u);if(T<1)throw new Error("bitSeqObj expects at least one named pair, got ["+u.join(", ")+"]");var v=g(function(P){return P[0]},m);return I(g(function(P){return P[1]},m)).map(function(P){return p(function(w,F){return F[0]!==null&&(w[F[0]]=F[1]),w},{},g(function(w,F){return[w,P[F]]},v))})},byte:function(u){if(x(),oe(u),u>255)throw new Error("Value specified to byte constructor ("+u+"=0x"+u.toString(16)+") is larger in value than a single byte.");var d=(u>15?"0x":"0x0")+u.toString(16);return r(function(T,m){var v=te(T,m);return v===u?D(m+1,v):A(m,d)})},buffer:function(u){return E("buffer",u).map(function(d){return Buffer.from(d)})},encodedString:function(u,d){return E("string",d).map(function(T){return T.toString(u)})},uintBE:N,uint8BE:N(1),uint16BE:N(2),uint32BE:N(4),uintLE:R,uint8LE:R(1),uint16LE:R(2),uint32LE:R(4),intBE:C,int8BE:C(1),int16BE:C(2),int32BE:C(4),intLE:$,int8LE:$(1),int16LE:$(2),int32LE:$(4),floatBE:E("floatBE",4).map(function(u){return u.readFloatBE(0)}),floatLE:E("floatLE",4).map(function(u){return u.readFloatLE(0)}),doubleBE:E("doubleBE",8).map(function(u){return u.readDoubleBE(0)}),doubleLE:E("doubleLE",8).map(function(u){return u.readDoubleLE(0)})},s.exports=r}])})});var qn=In((jt,Dn)=>{Dn.exports=he;he.flatten=he;he.unflatten=Mn;function _n(s){return s&&s.constructor&&typeof s.constructor.isBuffer=="function"&&s.constructor.isBuffer(s)}function kn(s){return s}function he(s,e){e=e||{};let o=e.delimiter||".",r=e.maxDepth,a=e.transformKey||kn,f={};function p(g,O,j){j=j||1,Object.keys(g).forEach(function(x){let I=g[x],E=e.safe&&Array.isArray(I),b=Object.prototype.toString.call(I),N=_n(I),R=b==="[object Object]"||b==="[object Array]",C=O?O+o+a(x):a(x);if(!E&&!N&&R&&Object.keys(I).length&&(!e.maxDepth||j<r))return p(I,C,j+1);f[C]=I})}return p(s),f}function Mn(s,e){e=e||{};let o=e.delimiter||".",r=e.overwrite||!1,a=e.transformKey||kn,f={};if(_n(s)||Object.prototype.toString.call(s)!=="[object Object]")return s;function g(x){let I=Number(x);return isNaN(I)||x.indexOf(".")!==-1||e.object?x:I}function O(x,I,E){return Object.keys(E).reduce(function(b,N){return b[x+o+N]=E[N],b},I)}function j(x){let I=Object.prototype.toString.call(x),E=I==="[object Array]",b=I==="[object Object]";if(x){if(E)return!x.length;if(b)return!Object.keys(x).length}else return!0}return s=Object.keys(s).reduce(function(x,I){let E=Object.prototype.toString.call(s[I]);return!(E==="[object Object]"||E==="[object Array]")||j(s[I])?(x[I]=s[I],x):O(I,x,he(s[I],e))},{}),Object.keys(s).forEach(function(x){let I=x.split(o).map(a),E=g(I.shift()),b=g(I[0]),N=f;for(;b!==void 0;){if(E==="__proto__")return;let R=Object.prototype.toString.call(N[E]),C=R==="[object Object]"||R==="[object Array]";if(!r&&!C&&typeof N[E]<"u")return;(r&&!C||!r&&N[E]==null)&&(N[E]=typeof b=="number"&&!e.object?[]:{}),N=N[E],I.length>0&&(E=g(I.shift()),b=g(I[0]))}N[E]=Mn(s[x],e)}),f}});var Te=On(An(),1),Fn=Te.Type.String({pattern:"^(\\./|\\../|/)[^*]*\\{languageTag\\}[^*]*\\.json",title:"Path to language files",description:"Specify the pathPattern to locate language files in your repository. It must include `{languageTag}` and end with `.json`.",examples:["./{languageTag}/file.json","../folder/{languageTag}/file.json","./{languageTag}.json"]}),Cn=Te.Type.Object({pathPattern:Fn,variableReferencePattern:Te.Type.Optional(Te.Type.Array(Te.Type.String(),{title:"Variable reference pattern",description:"The pattern to match content in the messages. You can define an opening and closing pattern. The closing pattern is not required. The default is '{{' and '}}'.",examples:["{ and }","{{ and }}","< and >","@:"]})),sourceLanguageFilePath:Te.Type.Optional(Fn),ignore:Te.Type.Optional(Te.Type.Array(Te.Type.String(),{title:"Ignore paths",description:"Set a path that should be ignored."}))});function Ye(s,e,o){return s.replace(new RegExp(rt(e),"g"),o)}function rt(s){return s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var U=On(Bn(),1),it=(s,e)=>U.default.createLanguage({entry:o=>U.default.alt(o.FunctionCall,U.default.any).many().map(r=>r.filter(a=>a!==null&&typeof a=="object")),stringLiteral:o=>U.default.alt(o.doubleQuotedString,o.singleQuotedString),doubleQuotedString:()=>U.default.string('"').then(U.default.regex(/[^"]*/)).skip(U.default.string('"')),singleQuotedString:()=>U.default.string("'").then(U.default.regex(/[^']*/)).skip(U.default.string("'")),whitespace:()=>U.default.optWhitespace,colon:o=>U.default.string(":").trim(o.whitespace),comma:o=>U.default.string(",").trim(o.whitespace),FunctionCall:function(o){return U.default.seqMap(U.default.regex(/[^a-zA-Z0-9]/),U.default.regex(/(?!(?:use|get)Translations\b)[a-zA-Z_][a-zA-Z0-9_]*/),U.default.string("("),U.default.index,o.stringLiteral,U.default.index,U.default.regex(/[^)]*/),U.default.string(")"),(r,a,f,p,g,O)=>a!=="t"&&!e[a]?null:{messageId:st(a,g,p.offset,e),position:{start:{line:p.line,character:p.column},end:{line:O.line,character:O.column}}})}}),ot=()=>U.default.createLanguage({entry:s=>U.default.alt(s.FunctionCall,U.default.any).many().map(e=>e.filter(o=>typeof o=="object"&&o&&o.varName&&o.ns)),stringLiteral:s=>U.default.alt(s.doubleQuotedString,s.singleQuotedString),doubleQuotedString:()=>U.default.string('"').then(U.default.regex(/[^"]*/)).skip(U.default.string('"')),singleQuotedString:()=>U.default.string("'").then(U.default.regex(/[^']*/)).skip(U.default.string("'")),comma:s=>U.default.string(",").trim(s.whitespace),whitespace:()=>U.default.optWhitespace,colon:s=>U.default.string(":").trim(s.whitespace),identifier:()=>U.default.regex(/[a-zA-Z_][a-zA-Z0-9_]*/),variableDeclarationName:s=>U.default.alt(s.identifier,U.default.seqMap(U.default.string("{"),s.whitespace,s.identifier,U.default.alt(U.default.seqMap(s.whitespace,U.default.string(":"),s.whitespace,s.identifier,(e,o,r,a)=>a),U.default.succeed(null)),s.whitespace,U.default.string("}"),(e,o,r,a,f,p)=>a||r)),stringParser:()=>U.default.alt(U.default.regexp(/'([^']*)'/,1).map(s=>({type:"string",value:s})),U.default.regexp(/"([^"]*)"/,1).map(s=>({type:"string",value:s}))),objectParser:()=>{let s={stringLiteral:U.default.regexp(/"([^"\\]|\\.)*"/).map(r=>JSON.parse(r)),variableName:U.default.regexp(/[a-zA-Z_][a-zA-Z0-9_]*(\.[a-zA-Z_][a-zA-Z0-9_]*)*/),functionLiteral:U.default.regexp(/function\s*\([^)]*\)\s*\{[^}]*\}/)},e=U.default.alt(s.stringLiteral,s.variableName,s.functionLiteral),o=U.default.seq(U.default.regexp(/[\w]+/).skip(U.default.optWhitespace),U.default.string(":").then(U.default.optWhitespace).then(e).fallback(void 0)).map(([r,a])=>a!==null?[r,a]:[r,void 0]);return U.default.optWhitespace.then(U.default.seq(U.default.string("{").then(U.default.optWhitespace),U.default.sepBy(o,U.default.string(",").then(U.default.optWhitespace)),U.default.optWhitespace.then(U.default.string("}"))).map(([,r])=>({type:"object",value:Object.fromEntries(r)})))},FunctionCall:function(s){let e=U.default.seqMap(U.default.regex(/\b(?:await\s+)?(?:use|get)Translations\b/),U.default.string("("),s.whitespace,U.default.alt(s.stringParser,s.objectParser),s.whitespace,U.default.regex(/[^)]*/),U.default.string(")"),(o,r,a,f)=>{let p;if(f.type==="string"&&typeof f.value=="string")p=f.value;else if(f.type==="object"){let g=f.value;g&&typeof g.namespace=="string"&&(p=g.namespace)}return{namespace:p}});return U.default.seqMap(U.default.index,U.default.regex(/\b(?:const|let|var)\b\s+/),s.variableDeclarationName,s.whitespace,U.default.string("="),s.whitespace,e,(o,r,a,f,p,g,O)=>O&&typeof O.namespace=="string"?{varName:a,ns:O.namespace,declarationPosition:o.offset}:null)}});function ut(s){let o=ot().entry.tryParse(s),r={};for(let a of o)a&&a.varName&&a.ns&&typeof a.declarationPosition=="number"&&(r[a.varName]||(r[a.varName]=[]),r[a.varName].push({ns:a.ns,declarationPosition:a.declarationPosition}));for(let a in r)r[a].sort((f,p)=>f.declarationPosition-p.declarationPosition);return r}var st=(s,e,o,r)=>{let a=r[s];if(!a)return e;let f=null;for(let p of a){if(p.declarationPosition>=o)continue;(f===null||p.declarationPosition>f.declarationPosition)&&(f=p)}return f===null?e:`${f.ns}.${e}`};function $n(s,e){try{let o=ut(s);return it(e,o).entry.tryParse(s)}catch(o){return console.error("Parsing error:",o),[]}}var Kn=s=>({"app.inlang.ideExtension":{messageReferenceMatchers:[async e=>$n(e.documentText,s)],extractMessageOptions:[{callback:e=>({bundleId:e.bundleId,messageReplacement:`{t("${e.bundleId}")}`})},{callback:e=>({bundleId:e.bundleId,messageReplacement:`t("${e.bundleId}")`})},{callback:e=>({bundleId:e.bundleId,messageReplacement:e.bundleId})}],documentSelectors:[{language:"typescriptreact"},{language:"javascript"},{language:"typescript"},{language:"svelte"}]}});var dn=On(qn(),1);var at=s=>{let e=zn(s,0);if(e===void 0||!lt(s[e]))return;let o=zn(s,e+1);if(o!==void 0)return ft(s,e,o)},Vn=at,zn=(s,e)=>{for(let o=e;o<s.length;o+=1){let r=s[o];if(!ct(r))return o}},ct=s=>s===" "||s==="	"||s===`
`||s==="\r",lt=s=>s==="{"||s==="[",ft=(s,e,o)=>{let r;for(let a=o-1;a>e;a-=1){let f=s[a];if(f==="\r")return;if(f===`
`)return pt(r);if(r===void 0)r=f;else if(r[0]===f)r+=f;else return}},pt=s=>s===void 0?0:s[0]===" "?s.length:s;var Nn=s=>{let e=s.endsWith(`
`),o=Vn(s);return(r,a)=>JSON.stringify(r,a,o)+(e?`
`:"")};var Wn,jn=!1,dt="plugin.inlang.nextIntl",Hn={id:dt,displayName:"Next-intl",description:"A plugin for the Next.js internationalization library next-intl",settingsSchema:Cn,loadMessages:async({settings:s,nodeishFs:e})=>(s["plugin.inlang.nextIntl"].variableReferencePattern=s["plugin.inlang.nextIntl"].variableReferencePattern||["{","}"],Tt({settings:s,pluginSettings:s["plugin.inlang.nextIntl"],nodeishFs:e})),saveMessages:async({messages:s,settings:e,nodeishFs:o})=>(e["plugin.inlang.nextIntl"].variableReferencePattern=e["plugin.inlang.nextIntl"].variableReferencePattern||["{","}"],mt({pluginSettings:e["plugin.inlang.nextIntl"],nodeishFs:o,messages:s})),addCustomApi:({settings:s})=>Kn(s["plugin.inlang.nextIntl"])};async function Tt(s){let e=[];for(let o of gt(s.settings.languageTags,s.settings.sourceLanguageTag)){let r=await yt(s.pluginSettings.pathPattern,o,s.settings.sourceLanguageTag,s.nodeishFs,typeof s.pluginSettings.sourceLanguageFilePath=="string"&&o===s.settings.sourceLanguageTag?s.pluginSettings.sourceLanguageFilePath:void 0);for(let[a,f]of Object.entries(r))Object.keys(f).length!==0&&bt(e,Ye(a,"u002E","."),o,f,s.pluginSettings)}return e}async function yt(s,e,o,r,a){typeof a>"u"&&(a=s.replace("{languageTag}",e));try{let f=await r.readFile(a,{encoding:"utf-8"});o===e&&(Wn=Nn(f));let p=JSON.parse(f);return Object.values(p).some(O=>typeof O=="object")&&(jn=!0),jn?(0,dn.flatten)(p,{transformKey:function(O){return Ye(O,".","u002E")}}):p}catch(f){if(f.code==="FileNotFound"||f.code==="ENOENT")return{};throw f}}var gt=(s,e)=>{let o=s.filter(r=>r!==e);return o.unshift(e),o},bt=(s,e,o,r,a)=>{let f=s.findIndex(p=>p.id===e);if(f!==-1){let p={languageTag:o,match:[],pattern:Jn(r,a.variableReferencePattern)};s[f]?.variants.push(p)}else{let p={id:e,alias:{},selectors:[],variants:[]};p.variants=[{languageTag:o,match:[],pattern:Jn(r,a.variableReferencePattern)}],s.push(p)}};function Jn(s,e){let o=e[1]?new RegExp(`(\\${e[0]}[^\\${e[1]}]+\\${e[1]})`,"g"):new RegExp(`(${e}\\w+)`,"g");return s.split(o).filter(a=>a!=="").map(a=>o.test(a)&&e[0]?{type:"VariableReference",name:e[1]?a.slice(e[0].length,-e[1].length):a.slice(e[0].length)}:{type:"Text",value:a})}async function mt(s){let e={};for(let o of s.messages)for(let r of o.variants)e[r.languageTag]??={},e[r.languageTag][o.id]=r.pattern;for(let[o,r]of Object.entries(e)){let a=typeof s.pluginSettings.sourceLanguageFilePath=="string"&&o===Object.keys(e)[0]?s.pluginSettings.sourceLanguageFilePath:s.pluginSettings.pathPattern.replace("{languageTag}",o);try{await s.nodeishFs.readdir(a.split("/").slice(0,-1).join("/"))}catch{await s.nodeishFs.mkdir(a.split("/").slice(0,-1).join("/"),{recursive:!0})}await s.nodeishFs.writeFile(a,It(r,s.pluginSettings.variableReferencePattern))}}function It(s,e){let o={};for(let[r,a]of Object.entries(s)){let f=Ye(r,"..","u002E.");f.slice(-1)==="."&&(f=f.replace(/.$/,"u002E")),o[f]=Ot(a,e)}return jn&&(o=(0,dn.unflatten)(o,{object:!0})),Ye(Wn(o),"u002E",".")}function Ot(s,e){let o=[];for(let r of s)switch(r.type){case"Text":o.push(r.value);break;case"VariableReference":o.push(e[1]?`${e[0]}${r.name}${e[1]}`:`${e[0]}${r.name}`);break;default:throw new Error(`Unknown message pattern element of type: ${r?.type}`)}return o.join("")}var Mt=Hn;export{Mt as default};
